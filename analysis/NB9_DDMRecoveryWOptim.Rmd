---
title: "Experience vs. description based decision-making project: DDM parameter recovery exercises"
output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: 'hide'
---

# Setup

Set up environment and load in data

```{r include=FALSE}
library(tidyverse)
library(here)
library(visualMLE)
cbbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
theme_set(theme_classic())
sem <- function(x) {sd(x, na.rm=T) / sqrt(length(x))}
helpers_path = here('analysis/helpers/')

set.seed(38573)
```

```{r}
source(paste0(helpers_path,'ddmSims/fit_task.R'))
source(paste0(helpers_path,'ddmSims/sim_task.R'))
source(paste0(helpers_path,'ddmSims/fit_ddm_pta.R'))
test_trial_conditions = read.csv(paste0(helpers_path, 'ddmSims/test_data/test_trial_conditions.csv'))
```

Empty lists to store the trial simulators for the forthcoming models.

```{r}
sim_trial_list = list()
fit_trial_list = list()
```

# Stop clusters

```{r}
# parallel::stopCluster(cl = my.fit.cluster)
# parallel::stopCluster(cl = my.sim.cluster)
```

------------------------------------------------------------------------------------------------------------------------------------------------------------------------
How viable is this with Stan or with the Lombardi toolbox using hierarchical models? Can you use the trial likelihood function to code the bespoke model in Stan?

```{r}

```

What do we know so far?
  Slight lottery bias in pooled data
  Categorically faster RTs when probFractalDraw == 1 in pooled data
  Slower decisions the more both attributes need to be considered in pooled data
  Individual differences both in all of the above stylized facts and in the best fitting RL model
What will we do with these parameters? 
  Individual difference analyses?
  Trial level covariate for imaging?
Move things over to remote cluster for subject estimation?