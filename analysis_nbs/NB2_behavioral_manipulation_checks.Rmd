---
title: "Experience vs. description based decision-making project: Behavioral manipulation checks"
output: html_notebook
---

# Set up environment and load in data

```{r}
library(tidyverse)
```

```{r}
helpers_path = '~/Dropbox/RangelLab/DescribedVsLearned/helpers/'
```

Read in *clean* behavioral data

```{r}
source(paste0(helpers_path,'clean_behavioral_data.R'))
```

- Are subjects "learning" fractal values?

As time goes by are they more likely to choose the fractal with the higher reward probability?

```{r}
clean_beh_data %>%
  mutate(leftFractalBetter = fractalLeftProb>fractalRightProb,
         choseBetterFractal = ifelse(leftFractalBetter & choiceLeft == 1, 1, 
                                     ifelse(!leftFractalBetter & choiceLeft == 0, 1, 0))) %>%
  ggplot(aes(trialNum, choseBetterFractal))+
  geom_jitter(width=0.03, height=0.08, alpha = 0.05)+
  geom_smooth(formula = 'y~x', method = "glm", method.args = list(family=binomial), fullrange=TRUE)
```

- How about in trials where the fractal value matters a lot?

```{r}
clean_beh_data %>%
  filter(probFractalDraw == 1) %>%
  mutate(leftFractalBetter = fractalLeftProb>fractalRightProb,
         choseBetterFractal = ifelse(leftFractalBetter & choiceLeft == 1, 1, 
                                     ifelse(!leftFractalBetter & choiceLeft == 0, 1, 0))) %>%
  # select(fractalLeftProb, fractalRightProb, leftFractalBetter, choseBetterFractal, choiceLeft)
  ggplot(aes(trialNum, choseBetterFractal))+
  geom_jitter(width=0.03, height=0.08, alpha = 0.05)+
  geom_smooth(formula = 'y~x', method = "glm", method.args = list(family=binomial), fullrange=TRUE)
```

- When p of fractal is 0 do subjects choose based on the EV difference between lotteries?

```{r}
clean_beh_data %>% 
  filter(probFractalDraw == 0) %>%
  mutate(leftLotteryEV = lotteryValue*lotteryProb,
         rightLotteryEV = referenceValue*referenceProb,
         leftEVAdv = leftLotteryEV - rightLotteryEV) %>%
  ggplot(aes(leftEVAdv, choiceLeft))+
  geom_jitter(width=0.03, height=0.08, alpha = 0.05)+
  geom_smooth(formula = 'y~x', method = "glm", method.args = list(family=binomial), fullrange=TRUE)+
  xlab("EV_left - EV_right")
```

- When p of fractal is 1 do subjects choose based on the EV difference between fractals?

```{r}

```

- Is there a lottery or fractal bias?

```{r}

```