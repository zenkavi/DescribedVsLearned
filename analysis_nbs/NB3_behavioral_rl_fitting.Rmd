---
title: "Experience vs. description based decision-making project: RL model fits onto behavioral data"
output: html_notebook
---

# Set up environment and load in data

```{r}
library(tidyverse)
```

```{r}
library(rstan)
```

```{r}
helpers_path = '~/Dropbox/RangelLab/DescribedVsLearned/helpers/'
```

Read in *clean* behavioral data

```{r}
source(paste0(helpers_path,'clean_behavioral_data.R'))
```

Reshape data for model

```{r}
num_subjs = length(unique(clean_beh_data$subnum))

num_trials = clean_beh_data %>%
  count(subnum) %>%
  select(n)
num_trials = num_trials$n

total_trials = sum(num_trials)

choices = clean_beh_data$choiceLeft

outcomes = as.matrix(clean_beh_data %>%
  select(leftFractalReward, rightFractalReward))
```

Fit model for all subjects

```{r}
fit = stan('../helpers/stanModels/fit_qlearning.stan', 
           data=list(num_subjs = num_subjs,
                     num_trials = num_trials,
                     total_trials = total_trials,
                     choices = choices,
                     outcomes = outcomes))
```